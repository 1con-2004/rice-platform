# rice-platform

# 前端

## 前端热重载开发步骤
1. 进入前端目录 `cd frontend`
2. 安装pnpm `pnpm install`
3. 运行项目 `pnpm run dev`

## Docker与前端配合的开发步骤
在终端进入前端目录后输入`docker-compose up --build`来运行Docker
之后可以在 http://localhost:3000访问.
如果不需要前台查看Docker日志，可以输入`docker-compose up -d来后台运行`

# 后端
1. 进入后端目录 `cd backend`
2. 安装pnpm `pnpm install`
3. 运行项目 `pnpm run dev`

# 数据库

# 其他
1. px转换问题

  - 开发时只需写px ✅
  -
  PostCSS在开发模式下也生效，Vite会自动处理
  - 前端服务器：http://localhost:3000

  2. 后端启动

  后端已经成功启动：
  - 端口：3001
  - 数据库连接成功
  - API地址：http://localhost:3001/api/

  3. 登录问题解决方案

  你需要同时运行两个服务器：

  终端1 - 启动后端：
  cd backend
  pnpm run dev

  终端2 - 启动前端：
  cd frontend
  pnpm run dev

  现在你可以在浏览器访问
  http://localhost:3000 测试登录功能。

  后端API已经在3001端口运行，前端会自动调用
  后端接口进行登录验证。用户名newuser和密码
  123456应该可以正常登录了。

# Playwright
🎉 完成！现在你有了自动化问题捕获系统

使用方法：

1. 自动调试测试问题：
pnpm run test:debug
这会运行测试并自动生成详细的错误分析报告

2. 智能修复+测试：
pnpm run test:fix
自动修复常见的选择器问题然后运行测试

3. 查看生成的文件：
- test-debug-log.txt - 详细的错误分析报告
- selector-suggestions.txt - 选择器改进建议
- playwright-best-practices.md - 测试最佳实践

系统特性：

✅ 自动错误检测 - 识别常见的测试失败模式
✅ 智能修复建议 - 提供具体的修复方案✅ 选择器优化 - 自动生成更稳定的选择器
✅ 详细日志 - 保存完整的分析报告
✅ 最佳实践 - 生成测试编写指南

 🤖 AI驱动的Playwright自动化测试调试系统总结

  经过完整的搭建和优化，你的rice-platform现在拥有了一个强大的AI驱动测试系统。让我详细总结一
  下现在能做什么：

  🎯 核心能力

  1. 智能错误捕获与分析

  pnpm run test:debug  # 自动运行测试并生成错误分析报告
  - ✅ 自动捕获测试失败的截图和视频
  - ✅ 分析错误模式（元素不存在、超时、导航失败等）
  - ✅ 生成详细的问题报告和修复建议
  - ✅ 保存完整的调试日志

  2. 基于截图的智能修复

  node scripts/final-fix.js  # 基于实际页面截图修复测试
  - ✅ 分析真实页面结构
  - ✅ 自动生成精确的元素选择器
  - ✅ 修复常见的选择器冲突问题
  - ✅ 创建更稳定的测试用例

  3. 针对你项目的专业测试

  多角色业务流程测试

  - 🌾 农户流程：登录 → 发布农作物 → 设置管理
  - 🛒 买家流程：搜索农作物 → 查看详情 → 联系农户
  - 👨‍💼 管理员流程：用户管理 → 内容审核 → 数据分析

  移动端响应式测试

  - 📱 自动测试不同屏幕尺寸（375x667等）
  - 📱 验证移动端布局和交互
  - 📱 确保PostCSS px转换正常工作

  跨浏览器兼容性

  - 🌐 Chrome桌面版测试
  - 📱 Mobile Chrome测试
  - 🔄 自动并行测试提高效率

  🛠 技术特性

  选择器智能优化

  // 从不稳定的通用选择器
  await page.locator('input[type="text"]').fill('user');

  // 自动优化为精确的选择器
  await page.locator('[placeholder="手机号或用户名"]').fill('user');

  自动重试和错误恢复

  - ⏱️ 智能超时处理（30秒测试超时）
  - 🔄 网络等待状态检测
  - 📊 详细的执行日志输出

  可视化调试

  - 📸 失败时自动截图
  - 🎥 完整的测试执行视频
  - 📊 HTML测试报告生成

  📋 可用命令

  # 核心功能测试（推荐日常使用）
  pnpm run test:core

  # 完整的E2E测试套件
  pnpm run test:e2e

  # 可视化UI测试
  pnpm run test:e2e:ui

  # 有头模式观察测试执行
  pnpm run test:e2e:headed

  # 调试模式（单线程，详细日志）
  pnpm run test:debug-simple

  # 自动错误分析
  pnpm run test:debug

  # 智能修复后测试
  pnpm run test:fix

  🎨 具体应用场景

  开发阶段

  - 🔧 新功能开发后立即验证
  - 🐛 快速发现UI回归问题
  - 📱 确保移动端适配正常

  部署前检查

  - ✅ 完整业务流程验证
  - ✅ 跨浏览器兼容性确认
  - ✅ 性能和加载速度检测

  持续集成

  - 🤖 自动化CI/CD集成
  - 📊 每次提交自动测试
  - 📧 失败时自动通知和报告

  🚀 相比传统测试的优势

  | 传统手动测试       | AI驱动的Playwright |
  |--------------|-----------------|
  | ❌ 需要手动点击每个功能 | ✅ 自动执行完整流程      |
  | ❌ 容易遗漏边缘情况   | ✅ 覆盖多种场景和设备     |
  | ❌ 问题定位靠猜测    | ✅ 精确的错误定位和截图    |
  | ❌ 修复后需要重新测试  | ✅ 一键重新验证所有功能    |
  | ❌ 移动端测试困难    | ✅ 自动模拟各种移动设备    |

  🎯 项目特定价值

  对于你的智慧农业溯源系统：

  1. 确保农户能正常发布农作物信息 🌾
  2. 验证买家搜索和购买流程顺畅 🛒
  3. 保证管理员后台功能正常 👨‍💼
  4. 确认移动端农户操作体验良好 📱
  5. 验证头像上传等文件操作 📸
  6. 测试用户认证和权限控制 🔐

  🔮 未来扩展能力

  - 📊 性能测试：页面加载速度、API响应时间
  - 🔍 无障碍测试：确保残障用户可访问
  - 🌐 国际化测试：多语言界面验证
  - 📈 数据驱动测试：批量测试不同数据场景

  ---
  总结：现在你拥有了一个完全自动化、智能化的测试系统，它不仅能发现问题，还能自动分析问题原
  因并提供修复方案。这大大提高了开发效率，确保了代码质量，让你能专注于业务功能开发而不是测
  试维护！🎉